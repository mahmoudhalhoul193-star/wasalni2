<header>
<h1>Ù…Ø´ÙˆØ±Ù†ÙŠ - ØªØ¬Ø±Ø¨Ø© WhatsApp</h1>
<p>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¢Ù† Ø¹Ø¨Ø± WhatsApp</p>
</header>

<script>
function toggleDark(){document.body.classList.toggle('dark');}

let drivers = JSON.parse(localStorage.getItem('drivers')) || [];
let orders = JSON.parse(localStorage.getItem('orders')) || [];

function saveDrivers(){ localStorage.setItem('drivers', JSON.stringify(drivers)); }
function saveOrders(){ localStorage.setItem('orders', JSON.stringify(orders)); }

function addDriver(){
    const name=document.getElementById('driverName').value;
    const phone=document.getElementById('driverPhone').value;
    if(!name||!phone){alert('Ø§ÙƒÙ…Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');return;}
    drivers.push({name,phone});
    document.getElementById('driverName').value='';
    document.getElementById('driverPhone').value='';
    saveDrivers();
    renderDrivers();
    updateDriverSelect();
}

function renderDrivers(){
    const list=document.getElementById('driversList');
    list.innerHTML='';
    drivers.forEach((d,i)=>{
        const div=document.createElement('div');
        div.textContent=`${i+1}. ${d.name} - ${d.phone}`;
        list.appendChild(div);
    });
}

function updateDriverSelect(){
    const select=document.getElementById('selectDriver');
    select.innerHTML='<option value="">Ø§Ø®ØªØ± Ø³ÙˆØ§Ù‚</option>';
    drivers.forEach((d,i)=>{select.innerHTML+=`<option value="${i}">${d.name}</option>`;});
}

function addOrder(){
    const cname=document.getElementById('customerName').value;
    const cphone=document.getElementById('customerPhone').value;
    const details=document.getElementById('orderDetails').value;
    const vehicle=document.getElementById('vehicleType').value;
    const driverIndex=document.getElementById('selectDriver').value;
    let price=parseFloat(document.getElementById('customPrice').value);
    const appRating=document.getElementById('appRating').value;
    const driverRating=document.getElementById('driverRating').value;

    if(!cname||!cphone||!details||driverIndex===''||isNaN(price)){
        alert('Ø§ÙƒÙ…Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª'); return;
    }
    if(price<10){ alert('Ø§Ù„Ø³Ø¹Ø± ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 10 Ø¬Ù†ÙŠÙ‡ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„'); return; }

    const driver = drivers[driverIndex];

    const msg = encodeURIComponent(`Ù…Ø±Ø­Ø¨Ø§ ${driver.name}!
Ù„Ø¯ÙŠÙƒ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ø¹Ù„Ù‰ Ù…Ø´ÙˆØ±Ù†ÙŠ ğŸš€

ğŸ‘¤ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„: ${cname}
ğŸ“ Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„: ${cphone}
ğŸ“ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨: ${details}
ğŸš— Ù†ÙˆØ¹ Ø§Ù„Ù…Ø±ÙƒØ¨Ø©: ${vehicle}
ğŸ’° Ø§Ù„Ø³Ø¹Ø±: ${price} Ø¬Ù†ÙŠÙ‡

ØªÙ‚ÙŠÙŠÙ… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚: ${appRating || '-'}
ØªÙ‚ÙŠÙŠÙ…Ùƒ ÙƒØ³ÙˆØ§Ù‚: ${driverRating || '-'}

ğŸ’¬ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø±Ø¯ Ø¹Ù„Ù‰ WhatsApp Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨.`);

    window.open(`https://wa.me/${driver.phone.replace(/[^0-9]/g,'')}?text=${msg}`, '_blank');

    const order={id:orders.length+1,customerName:cname,customerPhone:cphone,details,vehicle,status:'PENDING',driver:driver,price,appRating,driverRating};
    orders.push(order);
    saveOrders();

    document.getElementById('customerName').value='';
    document.getElementById('customerPhone').value='';
    document.getElementById('orderDetails').value='';
    document.getElementById('customPrice').value='';
    document.getElementById('selectDriver').value='';
    renderOrders();
}

function renderOrders(){
    const list=document.getElementById('ordersList');
    list.innerHTML='';
    orders.forEach(o=>{
        const div=document.createElement('div');
        div.innerHTML=`<b>${o.customerName}</b> - ${o.details} - ${o.vehicle} - Ø§Ù„Ø³Ø¹Ø±: ${o.price} Ø¬Ù†ÙŠÙ‡ - Ø³ÙˆØ§Ù‚: ${o.driver.name} - ØªÙ‚ÙŠÙŠÙ… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚: ${o.appRating || '-'} - ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø³ÙˆØ§Ù‚: ${o.driverRating || '-'} `;
        list.appendChild(div);
    });
}

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
renderDrivers();
updateDriverSelect();
renderOrders();
</script>
